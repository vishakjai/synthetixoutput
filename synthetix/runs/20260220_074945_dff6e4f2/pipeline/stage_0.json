{
  "run_id": "20260220_074945_dff6e4f2",
  "stage": 0,
  "result": {
    "agent_name": "System Intelligence Layer",
    "stage": 0,
    "status": "success",
    "summary": "SIL ready: 5 nodes, 4 edges, 2 conventions, 1 remediation items",
    "output": {
      "context_reference": {
        "version_id": "20260220T125004Z_20260220_074945_dff6e4f2",
        "repo": "Synthetix",
        "branch": "main",
        "commit_sha": "c999df34810e68df30cf9e53a685362906d4c725"
      },
      "context_bundle": {
        "bundle_id": "497ede52ecf74cbf9704b40eb5d7840f",
        "created_at": "2026-02-20T12:50:04.334831+00:00",
        "repo_ref": {
          "provider": "other",
          "repo_url": "Synthetix",
          "default_branch": "main",
          "branch": "main",
          "commit_sha": "c999df34810e68df30cf9e53a685362906d4c725",
          "subpath": ""
        },
        "artifacts": [
          {
            "artifact_type": "system_context_model",
            "artifact_id": "578bc32d25eb4219bd27a2775a3f0ded",
            "digest": "sha256:7ab09e0868098d8c503e8b3ba15c811c0722e409df5b9d66dfbaf4bebc3d22b9",
            "uri": "system_context_model.json"
          },
          {
            "artifact_type": "convention_profile",
            "artifact_id": "103bd49e59af43599c50dfba4822e8d7",
            "digest": "sha256:9c1cf89939e69da3dd21e3c930bfa94f960af0573dc5da9d78a3051d2378f1d4",
            "uri": "convention_profile.json"
          },
          {
            "artifact_type": "health_assessment_bundle",
            "artifact_id": "4f8ba5844c654ed59d332aada153163d",
            "digest": "sha256:14dfa54746063c306daff6fec2d2a78b9ab4cfbd69a8e4b51b8216155234118d",
            "uri": "health_assessment_bundle.json"
          }
        ],
        "policy_pack": {
          "id": "brownfield-context-first",
          "version": "1.0",
          "labels": {
            "governance": "enabled",
            "hard_gates": "true"
          }
        },
        "constraints": {
          "require_context_bundle_for_downstream": true,
          "immutable_artifacts": true,
          "no_inplace_mutation": true
        }
      },
      "contract_validation": {
        "generated_at": "2026-02-20T12:50:04.455724+00:00",
        "schema_issues": [],
        "semantic_issues": [],
        "is_valid": true,
        "severity": "ok"
      },
      "system_context_model": {
        "version": "1.0",
        "summary": "Legacy ASP application for managing customer orders, to be modernized to TypeScript.",
        "nodes": [
          {
            "id": "node:application",
            "type": "Service",
            "name": "Legacy Customer Orders",
            "metadata": {
              "language": "VBScript",
              "framework": "ASP Classic"
            },
            "confidence": 0.95,
            "provenance": [
              {
                "file": "global.asa",
                "line": 1,
                "evidence": "Application_OnStart"
              }
            ]
          },
          {
            "id": "node:customer_module",
            "type": "Module",
            "name": "Customer Module",
            "metadata": {
              "language": "VBScript"
            },
            "confidence": 0.9,
            "provenance": [
              {
                "file": "includes/customer.asp",
                "line": 1,
                "evidence": "Handles customer login and display"
              }
            ]
          },
          {
            "id": "node:orders_module",
            "type": "Module",
            "name": "Orders Module",
            "metadata": {
              "language": "VBScript"
            },
            "confidence": 0.9,
            "provenance": [
              {
                "file": "includes/orders.asp",
                "line": 1,
                "evidence": "Handles order creation and updates"
              }
            ]
          },
          {
            "id": "node:layout_module",
            "type": "Module",
            "name": "Layout Module",
            "metadata": {
              "language": "VBScript"
            },
            "confidence": 0.85,
            "provenance": [
              {
                "file": "includes/layout.asp",
                "line": 1,
                "evidence": "Renders HTML layout"
              }
            ]
          },
          {
            "id": "node:util_module",
            "type": "Module",
            "name": "Utility Module",
            "metadata": {
              "language": "VBScript"
            },
            "confidence": 0.85,
            "provenance": [
              {
                "file": "includes/util.asp",
                "line": 1,
                "evidence": "Provides utility functions"
              }
            ]
          }
        ],
        "edges": [
          {
            "type": "IMPORTS",
            "from": "node:customer_module",
            "to": "node:util_module",
            "directionality": "directed",
            "protocol_metadata": {},
            "confidence": 0.9,
            "evidence": [
              {
                "file": "includes/customer.asp",
                "line": 2,
                "evidence": "Include util.asp"
              }
            ]
          },
          {
            "type": "IMPORTS",
            "from": "node:orders_module",
            "to": "node:util_module",
            "directionality": "directed",
            "protocol_metadata": {},
            "confidence": 0.9,
            "evidence": [
              {
                "file": "includes/orders.asp",
                "line": 2,
                "evidence": "Include util.asp"
              }
            ]
          },
          {
            "type": "IMPORTS",
            "from": "node:customer_module",
            "to": "node:layout_module",
            "directionality": "directed",
            "protocol_metadata": {},
            "confidence": 0.85,
            "evidence": [
              {
                "file": "includes/customer.asp",
                "line": 3,
                "evidence": "Include layout.asp"
              }
            ]
          },
          {
            "type": "IMPORTS",
            "from": "node:orders_module",
            "to": "node:layout_module",
            "directionality": "directed",
            "protocol_metadata": {},
            "confidence": 0.85,
            "evidence": [
              {
                "file": "includes/orders.asp",
                "line": 3,
                "evidence": "Include layout.asp"
              }
            ]
          }
        ],
        "unknowns": []
      },
      "convention_profile": {
        "version": "1.0",
        "summary": "Legacy ASP application conventions with focus on modernization to TypeScript.",
        "rules": [
          {
            "id": "rule:naming_convention",
            "category": "naming",
            "rule": "Use camelCase for variable and function names.",
            "confidence": 0.8,
            "examples": [
              "function myFunction()"
            ],
            "counterexamples": [
              "function My_function()"
            ],
            "provenance": [
              {
                "file": "includes/util.asp",
                "line": 5,
                "evidence": "Function HtmlEncode"
              }
            ]
          },
          {
            "id": "rule:auth_handling",
            "category": "auth",
            "rule": "Session variables should be used for authentication state.",
            "confidence": 0.85,
            "examples": [
              "Session('IsAuthenticated') = True"
            ],
            "counterexamples": [
              "Application('IsAuthenticated') = True"
            ],
            "provenance": [
              {
                "file": "includes/customer.asp",
                "line": 12,
                "evidence": "Session('IsAuthenticated')"
              }
            ]
          }
        ],
        "lint_recommendations": [
          "Refactor VBScript to TypeScript using consistent naming conventions.",
          "Ensure all authentication logic is migrated to a secure TypeScript framework."
        ],
        "scaffold_templates": [
          "TypeScript Express.js template for customer and order management."
        ]
      },
      "health_assessment": {
        "version": "1.0",
        "summary": "Assessment of legacy ASP application for modernization.",
        "scores": {
          "maintainability": 3,
          "security": 2,
          "reliability": 3,
          "testability": 2
        },
        "hotspots": [
          {
            "scope": "Security",
            "reason": "Session management is handled in VBScript, which is less secure.",
            "severity": "high",
            "confidence": 0.9,
            "provenance": [
              {
                "file": "includes/customer.asp",
                "line": 12,
                "evidence": "Session('IsAuthenticated')"
              }
            ]
          }
        ],
        "risks": [
          {
            "title": "Security Risk",
            "description": "Legacy ASP application uses session management that may be vulnerable to attacks.",
            "severity": "critical",
            "confidence": 0.9
          }
        ]
      },
      "remediation_backlog": [
        {
          "id": "remediation:typescript_migration",
          "title": "Migrate VBScript to TypeScript",
          "problem_statement": "Legacy ASP application is written in VBScript, which is outdated and less secure.",
          "scope": [
            "node:application",
            "node:customer_module",
            "node:orders_module"
          ],
          "risk_if_unaddressed": "Continued use of outdated and insecure technology stack.",
          "effort": "L",
          "severity": "critical",
          "dependencies": [
            "node:util_module",
            "node:layout_module"
          ],
          "suggested_approach": "Refactor the entire application to TypeScript using modern frameworks like Express.js.",
          "success_criteria": [
            "All modules are rewritten in TypeScript.",
            "Application runs successfully in a local Docker environment."
          ],
          "confidence": 0.9,
          "provenance": [
            {
              "file": "global.asa",
              "line": 1,
              "evidence": "Legacy ASP application initialization"
            }
          ]
        }
      ]
    },
    "tokens_used": 21306,
    "latency_ms": 18222.792863845825,
    "logs": [
      "[System Intelligence Layer] Starting SIL generation...",
      "[System Intelligence Layer] SIL artifacts generated from LLM response"
    ]
  },
  "saved_at": "2026-02-20T12:50:04.456930+00:00"
}